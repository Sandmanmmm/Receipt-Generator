<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freight Waybill</title>
    <link rel="stylesheet" href="../css/waybill.css">
</head>
<body>
    <div class="waybill-container">
        <!-- Header -->
        <div class="waybill-header">
            <div class="carrier-info">
                <h1 class="carrier-name">{{ supplier_name }}</h1>
                <p class="carrier-license">License: {{ carrier_license }}</p>
                <p class="carrier-contact">{{ supplier_phone }} | {{ supplier_email }}</p>
            </div>
            <div class="waybill-meta">
                <h2 class="doc-type">WAYBILL / BILL OF LADING</h2>
                <p><strong>Waybill Number:</strong> {{ waybill_number }}</p>
                <p><strong>Date:</strong> {{ invoice_date }}</p>
                <p><strong>Tracking Number:</strong> {{ tracking_number }}</p>
            </div>
        </div>

        <!-- Shipment Details Grid -->
        <div class="shipment-grid">
            <!-- Origin -->
            <div class="location-box origin-box">
                <h3 class="location-title">ORIGIN / SHIPPER</h3>
                <p class="shipper-name">{{ shipper_name }}</p>
                <p class="origin">{{ origin }}</p>
                <p class="contact-info">{{ shipper_phone }}</p>
                <div class="datetime-info">
                    <strong>Pickup Date:</strong> {{ pickup_date }}<br>
                    <strong>Pickup Time:</strong> {{ pickup_time }}
                </div>
            </div>

            <!-- Destination -->
            <div class="location-box destination-box">
                <h3 class="location-title">DESTINATION / CONSIGNEE</h3>
                <p class="consignee-name">{{ consignee_name }}</p>
                <p class="destination">{{ destination }}</p>
                <p class="contact-info">{{ consignee_phone }}</p>
                <div class="datetime-info">
                    <strong>Expected Delivery:</strong> {{ delivery_date }}<br>
                    <strong>Delivery Window:</strong> {{ delivery_window }}
                </div>
            </div>
        </div>

        <!-- Shipment Information -->
        <div class="shipment-info-section">
            <h3>Shipment Information</h3>
            <div class="info-grid">
                <div class="info-item">
                    <span class="label">Service Type:</span>
                    <span class="value">{{ service_type }}</span>
                </div>
                <div class="info-item">
                    <span class="label">Incoterms:</span>
                    <span class="value incoterms">{{ incoterms }}</span>
                </div>
                <div class="info-item">
                    <span class="label">Carrier Name:</span>
                    <span class="value carrier-name">{{ carrier_name }}</span>
                </div>
                <div class="info-item">
                    <span class="label">Vehicle ID:</span>
                    <span class="value">{{ vehicle_id }}</span>
                </div>
                <div class="info-item">
                    <span class="label">Container Number:</span>
                    <span class="value container-number">{{ container_number }}</span>
                </div>
                <div class="info-item">
                    <span class="label">Seal Number:</span>
                    <span class="value">{{ seal_number }}</span>
                </div>
            </div>
        </div>

        <!-- Cargo Details -->
        <div class="cargo-section">
            <h3>Cargo Details</h3>
            <table class="cargo-table">
                <thead>
                    <tr>
                        <th>Item Description</th>
                        <th>Quantity</th>
                        <th>Packaging</th>
                        <th>Weight (kg)</th>
                        <th>Volume (m³)</th>
                        <th>Dimensions (cm)</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in cargo_items %}
                    <tr>
                        <td class="item-description">{{ item.description }}</td>
                        <td class="quantity">{{ item.quantity }}</td>
                        <td class="packaging">{{ item.packaging }}</td>
                        <td class="weight">{{ item.weight }}</td>
                        <td class="volume">{{ item.volume }}</td>
                        <td class="dimensions">{{ item.dimensions }}</td>
                        <td class="cargo-value">{{ item.value }}</td>
                    </tr>
                    {% endfor %}
                    <tr class="totals-row">
                        <td colspan="2"><strong>TOTALS:</strong></td>
                        <td><strong>{{ total_packages }} packages</strong></td>
                        <td class="total-weight"><strong>{{ total_weight }} kg</strong></td>
                        <td class="total-volume"><strong>{{ total_volume }} m³</strong></td>
                        <td></td>
                        <td class="total-value"><strong>{{ total_cargo_value }}</strong></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Special Instructions -->
        {% if special_instructions or handling_requirements %}
        <div class="special-instructions">
            <div class="instructions-box">
                <h4>Special Instructions</h4>
                <p>{{ special_instructions }}</p>
            </div>
            <div class="handling-box">
                <h4>Handling Requirements</h4>
                <ul class="handling-list">
                    {% for req in handling_requirements %}
                    <li>{{ req }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        {% endif %}

        <!-- Charges -->
        <div class="charges-section">
            <h3>Transportation Charges</h3>
            <table class="charges-table">
                <thead>
                    <tr>
                        <th>Description</th>
                        <th>Rate</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="charge-description">Freight Charge (Base)</td>
                        <td class="rate">{{ freight_rate }}</td>
                        <td class="amount">{{ freight_charge }}</td>
                    </tr>
                    {% if fuel_surcharge > 0 %}
                    <tr>
                        <td class="charge-description">Fuel Surcharge</td>
                        <td class="rate">{{ fuel_surcharge_rate }}%</td>
                        <td class="amount">{{ fuel_surcharge }}</td>
                    </tr>
                    {% endif %}
                    {% if handling_fee > 0 %}
                    <tr>
                        <td class="charge-description">Handling Fee</td>
                        <td class="rate">-</td>
                        <td class="amount">{{ handling_fee }}</td>
                    </tr>
                    {% endif %}
                    {% if insurance_charge > 0 %}
                    <tr>
                        <td class="charge-description">Insurance</td>
                        <td class="rate">{{ insurance_rate }}%</td>
                        <td class="amount insurance-charge">{{ insurance_charge }}</td>
                    </tr>
                    {% endif %}
                    {% if customs_fee > 0 %}
                    <tr>
                        <td class="charge-description">Customs/Documentation Fee</td>
                        <td class="rate">-</td>
                        <td class="amount">{{ customs_fee }}</td>
                    </tr>
                    {% endif %}
                </tbody>
                <tfoot>
                    <tr class="subtotal-row">
                        <td colspan="2">Subtotal</td>
                        <td class="subtotal">{{ subtotal }}</td>
                    </tr>
                    <tr>
                        <td colspan="2">Tax/VAT ({{ tax_rate }}%)</td>
                        <td class="tax">{{ tax_amount }}</td>
                    </tr>
                    <tr class="total-row">
                        <td colspan="2">TOTAL AMOUNT</td>
                        <td class="total-amount">{{ total_amount }}</td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <!-- Payment & Terms -->
        <div class="payment-terms-section">
            <div class="payment-info">
                <h4>Payment Information</h4>
                <p><strong>Payment Terms:</strong> {{ payment_terms }}</p>
                <p><strong>Payment Method:</strong> {{ payment_method }}</p>
                {% if invoice_status == "PAID" %}
                <p class="payment-status paid"><strong>Status:</strong> PAID</p>
                {% else %}
                <p class="payment-status unpaid"><strong>Status:</strong> UNPAID</p>
                {% endif %}
            </div>
            <div class="liability-info">
                <h4>Liability Declaration</h4>
                <p class="liability-text">
                    Carrier's liability is limited as per {{ incoterms }} terms and applicable
                    regulations. Maximum liability: {{ max_liability }} per shipment unless
                    additional insurance declared.
                </p>
            </div>
        </div>

        <!-- Signatures -->
        <div class="signatures-section">
            <div class="signature-box">
                <h4>Shipper's Signature</h4>
                <div class="signature-line">
                    {% if shipper_signature %}
                    <img src="{{ shipper_signature }}" alt="Shipper Signature" class="signature">
                    {% endif %}
                </div>
                <p class="signature-name">{{ shipper_name }}</p>
                <p class="signature-date">Date: {{ pickup_date }}</p>
            </div>

            <div class="signature-box">
                <h4>Carrier's Signature</h4>
                <div class="signature-line">
                    {% if carrier_signature %}
                    <img src="{{ carrier_signature }}" alt="Carrier Signature" class="signature">
                    {% endif %}
                </div>
                <p class="signature-name">{{ carrier_representative }}</p>
                <p class="signature-date">Date: {{ invoice_date }}</p>
            </div>

            <div class="signature-box">
                <h4>Consignee's Signature (Upon Delivery)</h4>
                <div class="signature-line">
                    {% if consignee_signature %}
                    <img src="{{ consignee_signature }}" alt="Consignee Signature" class="signature">
                    {% endif %}
                </div>
                <p class="signature-name">{{ consignee_name }}</p>
                <p class="signature-date">Date: {{ delivery_date }}</p>
            </div>
        </div>

        <!-- Footer -->
        <div class="waybill-footer">
            <div class="footer-notice">
                <p><strong>IMPORTANT:</strong> This waybill is a contract of carriage. By accepting this shipment,
                   the consignee acknowledges receipt of goods in apparent good condition unless noted.</p>
            </div>
            <div class="footer-contact">
                <p><strong>For claims and inquiries:</strong> {{ supplier_email }} | {{ supplier_phone }}</p>
                <p class="terms-conditions">{{ terms_conditions }}</p>
            </div>
        </div>
    </div>
</body>
</html>
