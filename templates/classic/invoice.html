<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice #{{ invoice_number }}</title>
    <link rel="stylesheet" href="../css/classic_invoice.css">
</head>
<body>
    <div class="invoice-box">
        <table class="main-table">
            <tr class="top">
                <td colspan="2">
                    <table>
                        <tr>
                            <td class="title">
                                <h1>{{ company_name }}</h1>
                                <div class="company-details">
                                    {{ company_address }}<br>
                                    {{ company_phone }}<br>
                                    {{ company_email }}
                                    {% if company_tax_id %}
                                    <br>Tax ID: {{ company_tax_id }}
                                    {% endif %}
                                </div>
                            </td>
                            <td class="invoice-details">
                                <strong>INVOICE</strong><br>
                                <span class="invoice-number"># {{ invoice_number }}</span><br>
                                <span class="invoice-date">{{ invoice_date }}</span>
                                {% if due_date %}
                                <br><strong>Due Date:</strong> {{ due_date }}
                                {% endif %}
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>

            <tr class="information">
                <td colspan="2">
                    <table>
                        <tr>
                            <td>
                                <strong>Bill To:</strong><br>
                                <span class="client-name">{{ client_name }}</span><br>
                                {{ client_address }}
                                {% if client_phone %}
                                <br>{{ client_phone }}
                                {% endif %}
                                {% if client_email %}
                                <br>{{ client_email }}
                                {% endif %}
                            </td>
                            {% if ship_to %}
                            <td>
                                <strong>Ship To:</strong><br>
                                {{ ship_to.name }}<br>
                                {{ ship_to.address }}
                            </td>
                            {% endif %}
                        </tr>
                    </table>
                </td>
            </tr>

            <tr class="heading">
                <td>Item</td>
                <td style="text-align: right;">Price</td>
            </tr>

            {% for item in items %}
            <tr class="item">
                <td>
                    {{ item.description }}
                    <br><small>Qty: {{ item.quantity }} Ã— {{ currency_symbol }}{{ "%.2f"|format(item.rate) }}</small>
                </td>
                <td style="text-align: right;">{{ currency_symbol }}{{ "%.2f"|format(item.amount) }}</td>
            </tr>
            {% endfor %}

            <tr class="total">
                <td></td>
                <td style="text-align: right;">
                    <table class="totals-table">
                        <tr>
                            <td>Subtotal:</td>
                            <td>{{ currency_symbol }}{{ "%.2f"|format(subtotal) }}</td>
                        </tr>
                        {% if discount %}
                        <tr>
                            <td>Discount ({{ discount_percent }}%):</td>
                            <td>-{{ currency_symbol }}{{ "%.2f"|format(discount) }}</td>
                        </tr>
                        {% endif %}
                        {% if tax %}
                        <tr>
                            <td>Tax ({{ tax_rate }}%):</td>
                            <td>{{ currency_symbol }}{{ "%.2f"|format(tax) }}</td>
                        </tr>
                        {% endif %}
                        {% if shipping %}
                        <tr>
                            <td>Shipping:</td>
                            <td>{{ currency_symbol }}{{ "%.2f"|format(shipping) }}</td>
                        </tr>
                        {% endif %}
                        <tr class="final-total">
                            <td><strong>Total:</strong></td>
                            <td><strong>{{ currency_symbol }}{{ "%.2f"|format(total) }}</strong></td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>

        {% if payment_info %}
        <div class="payment-info">
            <h3>Payment Information</h3>
            {% if payment_info.method %}
            <p>Method: {{ payment_info.method }}</p>
            {% endif %}
            {% if payment_info.account %}
            <p>Account: {{ payment_info.account }}</p>
            {% endif %}
            {% if payment_info.instructions %}
            <p>{{ payment_info.instructions }}</p>
            {% endif %}
        </div>
        {% endif %}

        {% if notes %}
        <div class="notes">
            <h4>Notes:</h4>
            <p>{{ notes }}</p>
        </div>
        {% endif %}

        {% if terms %}
        <div class="terms">
            <h4>Terms & Conditions:</h4>
            <p>{{ terms }}</p>
        </div>
        {% endif %}

        <div class="footer">
            Thank you for your business!
        </div>
    </div>
</body>
</html>
