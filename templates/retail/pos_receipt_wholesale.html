<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wholesale Receipt</title>
    <link rel="stylesheet" href="../css/pos_receipt_wholesale.css">
</head>
<body>
    <div class="wholesale-receipt">
        <!-- Header -->
        <div class="receipt-header">
            <div class="store-name">{{ store_name }}</div>
            <div class="store-type">WHOLESALE CLUB</div>
            <div class="member-services">Member Services & Business Center</div>
            <div class="store-address">{{ store_address }}</div>
            <div class="store-location">{{ city }}, {{ state }} {{ zip_code }}</div>
            <div class="store-contact">
                <span>{{ phone }}</span> ‚Ä¢ <span>{{ website }}</span>
            </div>
        </div>

        <!-- Member Information Banner -->
        <div class="member-banner">
            <div class="member-info-section">
                <div class="member-label">MEMBER #</div>
                <div class="member-number">{{ member_id }}</div>
            </div>
            <div class="member-info-section">
                <div class="member-label">MEMBER NAME</div>
                <div class="member-name">{{ member_name }}</div>
            </div>
            <div class="member-tier-badge {{ member_tier|lower }}">
                {{ member_tier }} MEMBER
            </div>
        </div>

        <!-- Business Account Info (if applicable) -->
        {% if business_account %}
        <div class="business-account-section">
            <div class="business-header">
                <span class="business-icon">üè¢</span>
                <span class="business-title">BUSINESS ACCOUNT</span>
            </div>
            <div class="business-details">
                <div class="business-row">
                    <span class="business-label">Company:</span>
                    <span class="business-value">{{ company_name }}</span>
                </div>
                <div class="business-row">
                    <span class="business-label">Tax ID:</span>
                    <span class="business-value">{{ tax_id }}</span>
                </div>
                <div class="business-row">
                    <span class="business-label">Resale Cert:</span>
                    <span class="business-value">{{ resale_certificate }}</span>
                </div>
                <div class="business-row">
                    <span class="business-label">Account #:</span>
                    <span class="business-value">{{ account_number }}</span>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Transaction Info -->
        <div class="transaction-info">
            <div class="info-row">
                <span class="info-label">Receipt #:</span>
                <span class="info-value">{{ receipt_number }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Date:</span>
                <span class="info-value">{{ transaction_date }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Time:</span>
                <span class="info-value">{{ transaction_time }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Cashier:</span>
                <span class="info-value">{{ cashier_name }} ({{ cashier_id }})</span>
            </div>
            <div class="info-row">
                <span class="info-label">Register:</span>
                <span class="info-value">{{ register_number }}</span>
            </div>
            {% if warehouse_location %}
            <div class="info-row">
                <span class="info-label">Warehouse:</span>
                <span class="info-value">{{ warehouse_location }}</span>
            </div>
            {% endif %}
        </div>

        <div class="section-divider"></div>

        <!-- Items Section -->
        <div class="items-section">
            <div class="items-header">ITEMS PURCHASED</div>
            
            {% for item in items %}
            <div class="item-block">
                <!-- Item Header -->
                <div class="item-header-row">
                    <div class="item-name">{{ item.name }}</div>
                    <div class="item-total-price">{{ item.total_price }}</div>
                </div>
                
                <!-- Item Details Row -->
                <div class="item-details-row">
                    <div class="item-sku">SKU: {{ item.sku }}</div>
                    {% if item.brand %}
                    <div class="item-brand">{{ item.brand }}</div>
                    {% endif %}
                </div>

                <!-- Bulk Quantity Display -->
                <div class="bulk-quantity-row">
                    {% if item.case_quantity %}
                    <div class="case-info">
                        <span class="quantity-icon">üì¶</span>
                        <span class="quantity-text">{{ item.case_quantity }} CASE{{ 's' if item.case_quantity > 1 else '' }}</span>
                        <span class="case-detail">({{ item.units_per_case }} units/case)</span>
                    </div>
                    {% endif %}
                    
                    {% if item.pallet_quantity %}
                    <div class="pallet-info">
                        <span class="quantity-icon">üöõ</span>
                        <span class="quantity-text">{{ item.pallet_quantity }} PALLET{{ 's' if item.pallet_quantity > 1 else '' }}</span>
                        <span class="pallet-detail">({{ item.cases_per_pallet }} cases/pallet)</span>
                    </div>
                    {% endif %}

                    {% if not item.case_quantity and not item.pallet_quantity %}
                    <div class="unit-info">
                        <span class="quantity-text">{{ item.quantity }} UNIT{{ 's' if item.quantity > 1 else '' }}</span>
                    </div>
                    {% endif %}
                </div>

                <!-- Pricing Breakdown -->
                <div class="pricing-row">
                    <div class="unit-price">
                        {% if item.case_quantity %}
                        <span class="price-label">Price/Case:</span>
                        <span class="price-value">{{ item.price_per_case }}</span>
                        {% elif item.pallet_quantity %}
                        <span class="price-label">Price/Pallet:</span>
                        <span class="price-value">{{ item.price_per_pallet }}</span>
                        {% else %}
                        <span class="price-label">Price/Unit:</span>
                        <span class="price-value">{{ item.unit_price }}</span>
                        {% endif %}
                    </div>
                    
                    {% if item.tiered_discount %}
                    <div class="tiered-savings">
                        <span class="savings-icon">üí∞</span>
                        <span class="savings-text">Tiered Discount: -{{ item.tiered_discount }}</span>
                    </div>
                    {% endif %}
                </div>

                <!-- Member Savings (if applicable) -->
                {% if item.member_discount %}
                <div class="member-savings-row">
                    <span class="savings-badge">MEMBER SAVINGS</span>
                    <span class="savings-amount">-{{ item.member_discount }}</span>
                </div>
                {% endif %}

                <!-- Weight/Measurement Info -->
                {% if item.weight %}
                <div class="weight-info">
                    <span class="weight-label">Total Weight:</span>
                    <span class="weight-value">{{ item.weight }} {{ item.weight_unit }}</span>
                </div>
                {% endif %}

                <!-- Returnable Deposit -->
                {% if item.deposit %}
                <div class="deposit-info">
                    <span class="deposit-label">Container Deposit:</span>
                    <span class="deposit-value">{{ item.deposit }}</span>
                </div>
                {% endif %}

                <!-- Expiration Date (for perishables) -->
                {% if item.expiration_date %}
                <div class="expiry-info">
                    <span class="expiry-icon">üìÖ</span>
                    <span class="expiry-text">Best By: {{ item.expiration_date }}</span>
                </div>
                {% endif %}

                <!-- Country of Origin -->
                {% if item.country_of_origin %}
                <div class="origin-info">
                    <span class="origin-label">Origin:</span>
                    <span class="origin-value">{{ item.country_of_origin }}</span>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>

        <div class="section-divider"></div>

        <!-- Subtotals and Discounts -->
        <div class="totals-section">
            <div class="total-row">
                <span class="total-label">SUBTOTAL</span>
                <span class="total-value">{{ subtotal }}</span>
            </div>

            {% if member_total_savings %}
            <div class="total-row savings-row">
                <span class="total-label">MEMBER SAVINGS</span>
                <span class="total-value">-{{ member_total_savings }}</span>
            </div>
            {% endif %}

            {% if bulk_discount %}
            <div class="total-row savings-row">
                <span class="total-label">BULK DISCOUNT</span>
                <span class="total-value">-{{ bulk_discount }}</span>
            </div>
            {% endif %}

            {% if coupon_savings %}
            <div class="total-row savings-row">
                <span class="total-label">COUPON SAVINGS</span>
                <span class="total-value">-{{ coupon_savings }}</span>
            </div>
            {% endif %}

            {% if tax_exempt %}
            <div class="total-row tax-exempt-row">
                <span class="total-label">SALES TAX (EXEMPT)</span>
                <span class="total-value">$0.00</span>
            </div>
            <div class="tax-exempt-notice">
                Tax Exempt - Resale Certificate: {{ resale_certificate }}
            </div>
            {% else %}
            <div class="total-row">
                <span class="total-label">SALES TAX ({{ tax_rate }}%)</span>
                <span class="total-value">{{ sales_tax }}</span>
            </div>
            {% endif %}

            {% if bottle_deposit %}
            <div class="total-row">
                <span class="total-label">BOTTLE DEPOSIT</span>
                <span class="total-value">{{ bottle_deposit }}</span>
            </div>
            {% endif %}

            {% if delivery_fee %}
            <div class="total-row">
                <span class="total-label">DELIVERY FEE</span>
                <span class="total-value">{{ delivery_fee }}</span>
            </div>
            {% endif %}

            <div class="section-divider-thin"></div>

            <div class="total-row grand-total">
                <span class="total-label">TOTAL</span>
                <span class="total-value">{{ total_amount }}</span>
            </div>
        </div>

        <div class="section-divider"></div>

        <!-- Payment Information -->
        <div class="payment-section">
            <div class="payment-header">PAYMENT INFORMATION</div>
            
            <div class="payment-row">
                <span class="payment-label">{{ payment_method }}</span>
                <span class="payment-value">{{ total_amount }}</span>
            </div>

            {% if card_type %}
            <div class="payment-details">
                <div class="card-info">{{ card_type }} ending in {{ card_last_four }}</div>
                {% if approval_code %}
                <div class="approval-info">Approval: {{ approval_code }}</div>
                {% endif %}
            </div>
            {% endif %}

            {% if change_due %}
            <div class="payment-row">
                <span class="payment-label">CHANGE DUE</span>
                <span class="payment-value">{{ change_due }}</span>
            </div>
            {% endif %}
        </div>

        <!-- Rewards/Cash Back Section -->
        {% if rewards_earned or cashback_earned %}
        <div class="rewards-section">
            <div class="rewards-header">REWARDS & CASH BACK</div>
            
            {% if rewards_earned %}
            <div class="rewards-row">
                <span class="rewards-label">‚≠ê Points Earned:</span>
                <span class="rewards-value">{{ rewards_earned }} points</span>
            </div>
            {% endif %}

            {% if cashback_earned %}
            <div class="rewards-row">
                <span class="rewards-label">üíµ Cash Back Earned:</span>
                <span class="rewards-value">{{ cashback_earned }}</span>
            </div>
            {% endif %}

            {% if rewards_balance %}
            <div class="rewards-row balance">
                <span class="rewards-label">Total Points Balance:</span>
                <span class="rewards-value">{{ rewards_balance }} points</span>
            </div>
            {% endif %}

            {% if cashback_balance %}
            <div class="rewards-row balance">
                <span class="rewards-label">Total Cash Back:</span>
                <span class="rewards-value">{{ cashback_balance }}</span>
            </div>
            {% endif %}
        </div>
        {% endif %}

        <!-- Total Savings Summary -->
        {% if total_savings %}
        <div class="savings-summary">
            <div class="savings-summary-header">
                TODAY'S TOTAL SAVINGS
            </div>
            <div class="savings-summary-amount">
                {{ total_savings }}
            </div>
            <div class="savings-summary-text">
                You saved {{ savings_percentage }}% with your membership!
            </div>
        </div>
        {% endif %}

        <div class="section-divider"></div>

        <!-- Return Policy -->
        <div class="policy-section">
            <div class="policy-title">RETURN POLICY</div>
            <div class="policy-text">
                Most items can be returned within {{ return_days }} days with receipt.
                Electronics and special orders: {{ electronics_return_days }} days.
                Perishable items must be returned same day.
            </div>
            {% if business_account %}
            <div class="policy-text">
                Business accounts: Contact your account manager for returns.
            </div>
            {% endif %}
        </div>

        <!-- Member Benefits -->
        <div class="benefits-section">
            <div class="benefits-title">MEMBER BENEFITS</div>
            <div class="benefits-text">
                ‚Ä¢ Exclusive wholesale pricing on bulk purchases<br>
                ‚Ä¢ Early access to special promotions<br>
                ‚Ä¢ Extended return periods for members<br>
                ‚Ä¢ Free business delivery on orders over {{ free_delivery_minimum }}<br>
                ‚Ä¢ Member-only fuel discount at our gas stations
            </div>
        </div>

        <!-- Contact Information -->
        <div class="contact-section">
            <div class="contact-title">QUESTIONS?</div>
            <div class="contact-text">
                Member Services: {{ customer_service_phone }}<br>
                Business Center: {{ business_center_phone }}<br>
                Online: {{ website }}
            </div>
        </div>

        <!-- Barcode -->
        <div class="barcode-section">
            <div class="barcode-image">||||||||||||||||||||||||||||</div>
            <div class="barcode-number">{{ receipt_number }}</div>
        </div>

        <!-- Footer Message -->
        <div class="footer-message">
            THANK YOU FOR YOUR MEMBERSHIP!<br>
            Visit us again soon for more wholesale savings!
        </div>

        <!-- Survey/Feedback -->
        {% if survey_code %}
        <div class="survey-section">
            <div class="survey-text">TAKE OUR SURVEY</div>
            <div class="survey-url">{{ survey_url }}</div>
            <div class="survey-code">Survey Code: {{ survey_code }}</div>
            <div class="survey-incentive">Complete within 7 days to receive {{ survey_reward }}</div>
        </div>
        {% endif %}
    </div>
</body>
</html>
