<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wayfair Professional Invoice</title>
    <link rel="stylesheet" href="../css/wayfair_professional_invoice.css">
</head>
<body>
    <div class="invoice-page">
        {% if _is_first_page|default(true) %}
        <!-- First Page Header -->
        <div class="header">
            <!-- Logo and Invoice Title Row -->
            <table class="header-table">
                <tr>
                    <td class="logo-cell">
                        <div class="wayfair-logo">
                            <span class="logo-icon">{{ logo_icon|default('W') }}</span>
                            <span class="logo-text">{{ supplier_name|default('wayfair') }}</span>
                            <span class="logo-pro">{{ account_badge|default('PROFESSIONAL') }}</span>
                        </div>
                    </td>
                    <td class="invoice-title-cell">
                        <div class="invoice-badge">INVOICE</div>
                        <div class="account-type">{{ account_type|default('Business Account') }}</div>
                    </td>
                </tr>
            </table>

            <!-- Invoice Details Bar -->
            <table class="details-bar">
                <tr>
                    <td class="detail-item">
                        <div class="detail-label">Invoice Number</div>
                        <div class="detail-value">{{ invoice_number }}</div>
                    </td>
                    <td class="detail-item">
                        <div class="detail-label">Order Number</div>
                        <div class="detail-value">{{ order_number }}</div>
                    </td>
                    <td class="detail-item">
                        <div class="detail-label">Order Date</div>
                        <div class="detail-value">{{ order_date }}</div>
                    </td>
                    <td class="detail-item">
                        <div class="detail-label">Payment Terms</div>
                        <div class="detail-value">{{ payment_terms|default('Net 30') }}</div>
                    </td>
                    <td class="detail-item last">
                        <div class="detail-label">PO Number</div>
                        <div class="detail-value">{{ po_number|default('N/A') }}</div>
                    </td>
                </tr>
            </table>
        </div>

        <!-- Addresses Section -->
        <table class="addresses-section">
            <tr>
                <td class="address-block sold-by">
                    <div class="address-header">Sold By</div>
                    <div class="address-content">
                        <div class="company-name">{{ supplier_name|default('Wayfair LLC') }}</div>
                        <div class="address-line">{{ supplier_address|default('4 Copley Place') }}</div>
                        <div class="address-line">{{ supplier_city|default('Boston') }}, {{ supplier_state|default('MA') }} {{ supplier_zip|default('02116') }}</div>
                        <div class="address-line">{{ supplier_country|default('United States') }}</div>
                        <div class="contact-line">
                            <span class="contact-label">Phone:</span> {{ supplier_phone|default('1-844-317-0739') }}
                        </div>
                        <div class="contact-line">
                            <span class="contact-label">Email:</span> {{ supplier_email|default('professional@wayfair.com') }}
                        </div>
                    </div>
                </td>
                <td class="address-block bill-to">
                    <div class="address-header">Bill To</div>
                    <div class="address-content">
                        <div class="company-name">{{ buyer_company|default(buyer_name) }}</div>
                        {% if buyer_contact %}
                        <div class="address-line">Attn: {{ buyer_contact }}</div>
                        {% endif %}
                        <div class="address-line">{{ buyer_address }}</div>
                        <div class="address-line">{{ buyer_city }}, {{ buyer_state }} {{ buyer_zip }}</div>
                        {% if buyer_country %}
                        <div class="address-line">{{ buyer_country }}</div>
                        {% endif %}
                        {% if buyer_email %}
                        <div class="contact-line">
                            <span class="contact-label">Email:</span> {{ buyer_email }}
                        </div>
                        {% endif %}
                        {% if buyer_tax_id %}
                        <div class="contact-line">
                            <span class="contact-label">Tax ID:</span> {{ buyer_tax_id }}
                        </div>
                        {% endif %}
                    </div>
                </td>
                <td class="address-block ship-to">
                    <div class="address-header">Ship To</div>
                    <div class="address-content">
                        <div class="company-name">{{ shipping_name|default(buyer_company)|default(buyer_name) }}</div>
                        <div class="address-line">{{ shipping_address|default(buyer_address) }}</div>
                        <div class="address-line">{{ shipping_city|default(buyer_city) }}, {{ shipping_state|default(buyer_state) }} {{ shipping_zip|default(buyer_zip) }}</div>
                        {% if shipping_country|default(buyer_country) %}
                        <div class="address-line">{{ shipping_country|default(buyer_country) }}</div>
                        {% endif %}
                        {% if shipping_method %}
                        <div class="shipping-badge">
                            {{ shipping_method }}
                        </div>
                        {% endif %}
                    </div>
                </td>
            </tr>
        </table>

        <!-- Category Banner -->
        {% if category or project_name %}
        <div class="category-banner">
            {% if project_name %}
            <span class="banner-item"><strong>Project:</strong> {{ project_name }}</span>
            {% endif %}
            {% if category %}
            <span class="banner-item"><strong>Category:</strong> {{ category }}</span>
            {% endif %}
        </div>
        {% endif %}
        {% endif %}

        <!-- Continuation Header -->
        {% if not _is_first_page|default(true) %}
        <div class="continuation-header">
            <div class="cont-left">
                <span class="cont-logo">{{ logo_icon|default('W') }}</span>
                <span class="cont-company">{{ supplier_name|default('wayfair') }}</span>
                <span class="cont-pro">{{ account_badge|default('PROFESSIONAL') }}</span>
            </div>
            <div class="cont-center">
                <span class="cont-invoice">Invoice: {{ invoice_number }}</span>
            </div>
            <div class="cont-right">
                <span class="cont-page">Page {{ _page_number }} of {{ _total_pages }}</span>
            </div>
        </div>
        {% endif %}

        <!-- Items Table -->
        <table class="items-table">
            <thead>
                <tr>
                    <th class="col-sku">SKU</th>
                    <th class="col-desc">Product Description</th>
                    <th class="col-color">Color/Finish</th>
                    <th class="col-qty">Qty</th>
                    <th class="col-price">Unit Price</th>
                    <th class="col-total">Total</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                <tr class="item-row {% if loop.index % 2 == 0 %}even{% else %}odd{% endif %}">
                    <td class="col-sku">
                        <div class="item-sku">{{ item.sku|default(item.item_code) }}</div>
                    </td>
                    <td class="col-desc">
                        <div class="item-name">{{ item.name }}</div>
                        {% if item.brand %}
                        <div class="item-brand">by {{ item.brand }}</div>
                        {% endif %}
                        {% if item.dimensions %}
                        <div class="item-dimensions">{{ item.dimensions }}</div>
                        {% endif %}
                    </td>
                    <td class="col-color">{{ item.color|default(item.variant)|default('--') }}</td>
                    <td class="col-qty">{{ item.quantity }}</td>
                    <td class="col-price">${{ item.unit_price }}</td>
                    <td class="col-total">${{ item.total }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Page Break Indicator -->
        {% if not _is_last_page|default(true) %}
        <div class="page-break-notice">
            <span class="notice-text">-- Continued on next page --</span>
        </div>
        {% endif %}

        <!-- Totals Section (Last Page Only) -->
        {% if _is_last_page|default(true) %}
        <table class="totals-section">
            <tr>
                <td class="notes-column">
                    {% if notes %}
                    <div class="notes-box">
                        <div class="notes-header">Order Notes</div>
                        <div class="notes-content">{{ notes }}</div>
                    </div>
                    {% endif %}

                    <div class="business-notice">
                        <div class="notice-icon">[i]</div>
                        <div class="notice-text">
                            <strong>Wayfair Professional:</strong> Business accounts enjoy special pricing, 
                            dedicated support, and Net 30 payment terms. Tax-exempt orders require valid 
                            exemption certificate on file.
                        </div>
                    </div>

                    {% if tracking_number %}
                    <div class="tracking-box">
                        <div class="tracking-header">Shipment Tracking</div>
                        <div class="tracking-content">
                            <span class="tracking-label">Carrier:</span> {{ carrier|default('FedEx') }}<br>
                            <span class="tracking-label">Tracking:</span> {{ tracking_number }}
                        </div>
                    </div>
                    {% endif %}
                </td>
                <td class="totals-column">
                    <table class="totals-table">
                        <tr>
                            <td class="total-label">Subtotal:</td>
                            <td class="total-value">${{ subtotal }}</td>
                        </tr>
                        {% if discount_amount %}
                        <tr class="discount-row">
                            <td class="total-label">Business Discount ({{ discount_percent|default('10%') }}):</td>
                            <td class="total-value discount">-${{ discount_amount }}</td>
                        </tr>
                        {% endif %}
                        <tr>
                            <td class="total-label">Shipping:</td>
                            <td class="total-value">${{ shipping_amount|default('0.00') }}</td>
                        </tr>
                        {% if tax_amount and tax_amount != '0.00' %}
                        <tr>
                            <td class="total-label">Sales Tax ({{ tax_rate|default('') }}):</td>
                            <td class="total-value">${{ tax_amount }}</td>
                        </tr>
                        {% endif %}
                        {% if surcharge_amount %}
                        <tr>
                            <td class="total-label">Large Item Surcharge:</td>
                            <td class="total-value">${{ surcharge_amount }}</td>
                        </tr>
                        {% endif %}
                        <tr class="grand-total">
                            <td class="total-label">Invoice Total:</td>
                            <td class="total-value">${{ total }}</td>
                        </tr>
                    </table>

                    {% if amount_paid %}
                    <table class="payment-status">
                        <tr>
                            <td class="payment-label">Amount Paid:</td>
                            <td class="payment-value">${{ amount_paid }}</td>
                        </tr>
                        <tr class="balance-row">
                            <td class="payment-label">Balance Due:</td>
                            <td class="payment-value">${{ balance_due|default('0.00') }}</td>
                        </tr>
                        {% if due_date %}
                        <tr>
                            <td class="payment-label">Due Date:</td>
                            <td class="payment-value">{{ due_date }}</td>
                        </tr>
                        {% endif %}
                    </table>
                    {% endif %}
                </td>
            </tr>
        </table>

        <!-- Payment Information -->
        <div class="payment-info">
            <div class="payment-header">Payment Options</div>
            <table class="payment-methods">
                <tr>
                    <td class="method-block">
                        <div class="method-icon">[CC]</div>
                        <div class="method-name">Credit Card</div>
                        <div class="method-detail">Visa, MC, Amex, Discover</div>
                    </td>
                    <td class="method-block">
                        <div class="method-icon">[ACH]</div>
                        <div class="method-name">ACH/eCheck</div>
                        <div class="method-detail">Direct bank transfer</div>
                    </td>
                    <td class="method-block">
                        <div class="method-icon">[NET]</div>
                        <div class="method-name">Net Terms</div>
                        <div class="method-detail">Net 30 for qualified accounts</div>
                    </td>
                    <td class="method-block">
                        <div class="method-icon">[PO]</div>
                        <div class="method-name">Purchase Order</div>
                        <div class="method-detail">With approved credit</div>
                    </td>
                </tr>
            </table>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-left">
                <span class="footer-logo">{{ logo_icon|default('W') }}</span>
                <span class="footer-text">{{ supplier_name|default('Wayfair LLC') }} | {{ supplier_address|default('4 Copley Place') }}, {{ supplier_city|default('Boston') }}, {{ supplier_state|default('MA') }} {{ supplier_zip|default('02116') }}</span>
            </div>
            <div class="footer-center">
                <span class="footer-contact">{{ supplier_website|default('wayfair.com/professional') }} | {{ supplier_phone|default('1-844-317-0739') }}</span>
            </div>
            <div class="footer-right">
                <span class="page-info">Page {{ _page_number|default(1) }} of {{ _total_pages|default(1) }}</span>
            </div>
        </div>
        {% endif %}
    </div>
</body>
</html>
